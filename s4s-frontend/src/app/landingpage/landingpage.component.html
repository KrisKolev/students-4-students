<!--div class="image"></div-->

<div class="maps-container" [@extendMap]="isTopLocationsVisible ? 'closed' : 'open'">
    <google-map
        #googleMap
        [zoom]="zoom"
        width="100%"
        height="100%"
        [center]="center"
        [options]="options"
        (mapClick)="onMapClick($event)">
        <map-marker
                markerElem="mapMarker"
                *ngFor="let marker of mapMarkers"
                [position]="marker.position"
                [label]="marker.label"
                [title]="marker.title"
                [options]="marker.options"></map-marker>
        <map-marker
                markerElem="mapMarkerExisting"
                *ngFor="let marker of mapMarkersSights"
                [position]="marker.position"
                [label]="marker.label"
                [title]="marker.title"
                [options]="marker.options"
                [icon]="marker.icon"></map-marker>
    </google-map>
</div>

<div class="top-locations-container" *ngIf="isTopLocationsVisible" [@extendLocations]="isTopLocationsVisible ? 'open' : 'closed'" [@moveSightsDetails]="isSightDetailVisible ? 'open' : 'closed'">
    <div>
        <h2>Here are locations near you</h2>
        <h3>{{currentLocationAddress}} </h3>

        <mat-expansion-panel expanded="true" *ngFor="let sight of allSightsSortedByDistance">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <mat-label >
                        <strong [textContent]="sight.name"></strong>
                    </mat-label>

                    <br/>

                </mat-panel-title>
                <mat-panel-description>
                    <mat-label [textContent]="'     (' + sight.showDistanceString + ')'"></mat-label>
                </mat-panel-description>
            </mat-expansion-panel-header>

            <div class="card-detail" >

                <mat-grid-list cols="2" rowHeight="2:1">
                    <mat-grid-tile>
                        <ngb-carousel>
                            <ng-template ngbSlide *ngFor="let image of sight.allImageUrl">
                                <div class="picsum-img-wrapper">
                                    <img [src]="image" alt="Random slide">
                                </div>
                            </ng-template>
                        </ngb-carousel>
                    </mat-grid-tile>
                    <mat-grid-tile>
                        <button class="sight-show-detail-btn" mat-raised-button (click)="onGoToSight(sight)">Details</button>
                    </mat-grid-tile>
                </mat-grid-list>


                <app-star-rating width="100px" [clickable]="true" [starCount]="5" [rating]="sight.overallRating"></app-star-rating>

                <br/>
                <mat-label><strong>Address: </strong></mat-label>
                <mat-label [textContent]="sight.address"></mat-label>
                <br/>

            </div>

        </mat-expansion-panel>
    </div>
</div>

<div *ngIf="isSightDetailVisible" [@moveSightsDetailsContainer]="isSightDetailVisible ? 'open' : 'closed'" class="sight-details-view">
    <label>Details</label>
    <button mat-raised-button class="close-button-detail"
    (click)="onCloseSightDetail()">X</button>
</div>

<div class="maps-gotolocation" [@moveMapButtons]="isTopLocationsVisible ? 'open' : 'closed'">
    <mat-card-actions>
        <button class="map-action-button" mat-raised-button (click)="onGoToLocation()" background-color="primary">
            Go to your location
        </button>
    </mat-card-actions>
</div>

<div class="maps-toggleTopLocations" [@moveLocationButton]="isTopLocationsVisible ? 'open' : 'closed'">
    <mat-card-actions>
        <button class="map-action-button" mat-raised-button (click)="onToggleTopLocations(false)" background-color="primary">
            {{toggleTopLocationsText}}
        </button>
    </mat-card-actions>
</div>

<div class="map-search-adressbar">
    <form >
        <mat-form-field appearance="fill">
            <mat-label class="address-placeholder-label">Enter an address to search</mat-label>
            <input width="400px" type="text" matInput  autocorrect="off" autocapitalize="off" spellcheck="off" type="text" #addressSearch [(ngModel)]="addressValue">
        </mat-form-field>
    </form>
</div>